<!DOCTYPE html><html lang="ja"><head><title> AWSでNetApp Cloud Backup Serviceを使用してデータをバックアップおよび復元する| NetApp Cloud Docs </title><meta charset="utf-8"><meta property="og:title" content="Backing up and restoring data using the NetApp Cloud Backup Service in AWS | NetApp Cloud Docs" /><meta property="og:type" content="website" /><meta property="og:url" content="https://docs.netapp.com/occm/ja-jp/task_setting_up_cbs.html" /><meta property="og:description" content="The NetApp Cloud Backup Service for Cloud Volumes ONTAP delivers fully-managed backup and restore capabilities for protection and long-term archive of your c..." /><meta property="og:image" content="https://docs.netapp.com/occm/ja-jp/images/logo-tophat-social.png" /><meta property="og:image:alt" content="NetApp Logo" /><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="format-detection" content="telephone=no"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="x-ua-compatible" content="ie=edge,chrome=1"><meta http-equiv="encoding" content="utf-8"><meta http-equiv="nss-type" content="Product Documentation"/><meta http-equiv="nss-subtype" content="User Guide"/><meta http-equiv="nss-product" content="OnCommand"/><meta name="description" content="The NetApp Cloud Backup Service for Cloud Volumes ONTAP delivers fully-managed backup and restore capabilities for protection and long-term archive of your c..."><meta name="keywords" content=" backing up, restoring, back up, backup, restore, cloud volumes ontap, cloud backup service, aws"><!-- Icons --><link rel="icon" href="/occm/ja-jp/images/favicon.ico" type="image/x-icon"><!-- RSS Feed --><link rel="alternate" type="application/rss+xml" title="NetApp Cloud Docs" href="/occm/ja-jp/feed.xml"><!-- CSS Definitions: NetApp CSS should be defined after generic css --><!-- Elastic Search --><link rel="stylesheet" href="//cdn.jsdelivr.net/searchkit/0.10.0/theme.css"><!-- LUCI CSS Content --><link rel="stylesheet" href="/occm/ja-jp/common/css/esb.min.css"><link rel="stylesheet" href="/occm/ja-jp/common/css/netapp-library.min.css"><link rel="stylesheet" href="/occm/ja-jp/common/css/doc.css"><link rel="stylesheet" href="/occm/ja-jp/common/css/doc-components.css"><link rel="stylesheet" href="/occm/ja-jp/css/na-sidebar.css" type="text/css"><link rel="stylesheet" href="/occm/ja-jp/css/na-search.css" type="text/css"><link rel="stylesheet" href="/occm/ja-jp/css/clouddocs.css" type="text/css"><!-- Font awesome seems to affect our GitHub Icon and generic "arrow box" for external links. --><link rel="stylesheet" type="text/css" href="/occm/ja-jp/css/font-awesome.min.css"><!-- <link rel="stylesheet" href="/occm/ja-jp/css/customstyles.css"> --><!-- Controls the shadow effect for search dropdown menu --><link rel="stylesheet" href="/occm/ja-jp/css/boxshadowproperties.css"><!-- NetApp CSS controls the technical content --><link rel="stylesheet" href="/occm/ja-jp/css/netapp.css" type="text/css"><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script><!-- Used to import Promise for IE. Required for SearchKit --><script src="https://cdnjs.cloudflare.com/ajax/libs/bluebird/3.3.5/bluebird.min.js"></script><script src="/occm/ja-jp/js/na-search.js"></script><link rel="stylesheet" href="/occm/ja-jp/css/na-pagenav.css" type="text/css" id="pagenav-css"><script src="/occm/ja-jp/js/na-pagenav.js"></script><link rel="stylesheet" href="/occm/ja-jp/css/prism.css" type="text/css"><link rel="stylesheet" href="/occm/ja-jp/css/prism-netapp.css" type="text/css"><script src="/occm/ja-jp/js/clouddocs.js"></script><script src="/occm/ja-jp/js/s_code_impl.js"></script><script src="/occm/ja-jp/js/jquery.navgoco.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><script src="/occm/ja-jp/js/toc.js"></script><script src="/occm/ja-jp/js/customscripts.js"></script><script>
      $(document).ready(function() {
          // Initialize navgoco with default options
          $("#mysidebar").navgoco({
              caretHtml: "",
              accordion: true,
              openClass: "active", // open
              save: false, // leave false or nav highlighting doesn"t work right
              cookie: {
                  name: "navgoco",
                  expires: false,
                  path: "/"
              },
              slide: {
                  duration: 400,
                  easing: "swing"
              }
          });

          $("#collapseAll").click(function(e) {
              e.preventDefault();
              $("#mysidebar").navgoco("toggle", false);
          });

          $("#expandAll").click(function(e) {
              e.preventDefault();
              $("#mysidebar").navgoco("toggle", true);
          });

      });

  </script><script>
      $(document).ready(function() {
          $("#tg-sb-link").click(function() {
              $("#tg-sb-sidebar").toggle();
              $("#tg-sb-content").toggleClass("col-md-9");
              $("#tg-sb-content").toggleClass("col-md-12");
              $("#tg-sb-icon").toggleClass("fa-toggle-on");
              $("#tg-sb-icon").toggleClass("fa-toggle-off");
          });
      });
  </script><!-- Controls the i18n Browser Redirection --><script>
    var siteLocales = [];
    
      siteLocales.push("us-en");
    
      siteLocales.push("en");
    
      siteLocales.push("ja-jp");
    

    standardizeUrl(siteLocales, "clouddocs.netapp.com", "https://docs.netapp.com");
  </script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-81697994-3"></script><script>
  if (document.location.hostname === "docs.netapp.com") {
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag("js", new Date());
    gtag("config", "UA-81697994-3");
  }
  </script></head><body class="n-doc__component-detail"> <a href="#n-main-content" class="visually-hidden">メインコンテンツにスキップ</a> <div class="n-off-canvas-menu"><div class="n-off-canvas-menu__menu"><div class="n-off-canvas-menu__menu-inner"><div class="n-off-canvas-menu__property-title"> NetApp Cloud Docs </div><ul class="n-off-canvas-menu__property-navigation-list"><li class="n-off-canvas-menu__property-navigation-list-item "> <a href="https://docs.netapp.com/ja-jp/" class="n-off-canvas-menu__property-navigation-link">ホーム</a> <div class="n-off-canvas-menu__child-menu"><ul class="n-menu__list"></ul></div></li></ul><ul class="n-off-canvas-menu__global-navigation-list"><li class="n-off-canvas-menu__global-navigation-list-header"> NetAppのその他の製品</li><li class="n-off-canvas-menu__global-navigation-list-item"> <a href="#" class="n-off-canvas-menu__global-navigation-link">Netapp.com</a> </li></ul></div></div></div><div class="n-off-canvas-menu__content-wrap"><!-- Header --><header><!-- Top Hat --><div class="n-top-hat"><div class="n-container"><div class="n-top-hat__cross-property-nav"><ul class="n-top-hat__list"><li class="n-top-hat__list-item"> <a href="http://www.netapp.com" class="n-top-hat__link">NetApp.com</a> </li></ul></div></div></div><!-- Property Bar --><div class="n-property-bar n-property-bar--v3"><div class="n-property-bar__inner-wrap"><div class="n-property-bar__menu-toggle"> <a href="#" class="n-property-bar__menu-toggle-link"><span class="n-property-bar__menu-toggle-text">メニュー</span></a> <svg class="n-icon-bars n-property-bar__menu-toggle-icon" aria-labelledby="title"><use xlink:href="/occm/ja-jp/common/svg/sprite.svg#bars"></use></svg></div><div class="n-property-bar__property-mark n-property-bar__property-mark--has-property-name"><div class="n-property-bar__logo"><svg class="n-icon-netapp-mark n-property-bar__netapp-mark-icon" aria-labelledby="title"><use xlink:href="/occm/ja-jp/common/svg/sprite.svg#netapp-mark"></use></svg><svg class="n-property-bar__logo-svg" aria-labelledby="title"><use xlink:href="/occm/ja-jp/common/svg/sprite.svg#netapp-logo"></use></svg></div><h2 class="n-property-bar__property-name">クラウドドキュメント</h2></div><div id="search-demo-container" class="n-property-bar__search"><div id="react-search"></div></div><div id="ie-i18n-menu" class="n-property-bar__utils"><ul class="n-property-navigation-bar__utils-list"><li class="n-property-navigation-bar__utils-list-item ie-i18n-container"> <a href="#" class="n-property-navigation-bar__utils-link n-property-navigation-bar__nav-link n-property-navigation-bar__language-selector-toggle ie-i18n-link" data-menu-id="n-property-navigation-bar__menu--language-selector"><span class="ie-i18n-lang">日本人</span></a> <svg class="ie-i18n-icon-container" class="n-property-bar__logo-svg" aria-labelledby="title"><use xlink:href="/occm/ja-jp/common/svg/sprite.svg#globe" class="n-icon-globe n-globe__icon"></use></svg></li></ul></div></div><div class="n-property-bar__menus"><div id="n-property-navigation-bar__menu--language-selector" class="n-menu n-menu--v3"><div class="n-language-selector-menu"><div class="n-language-selector-menu__header"> <span class="n-language-selector-menu__title">あなたが使う言語を選んでください</span> </div><ul class="n-menu__list"><li class="n-menu__list-column"><ul class="n-menu__list"><li class="n-menu__list-item n-menu__list-item--level-1"> <a href="/occm/us-en/" class="n-menu__header-text">英語</a> </li><li class="n-menu__list-item n-menu__list-item--level-1"> <a href="/occm/ja-jp/" class="n-menu__header-text">日本人</a> </li></ul></li></ul><div class="menu__footer"><p>現在の言語：日本語</p></div></div></div></div></div></header><!-- Content --><main role="main" id="n-main-content" class="n-main-content"><div class="n-container"><div class="n-row"><div class="n-doc n-doc__component-list"><!-- Sidebar Column --><div class="col-md-3" ><ul id="mysidebar" class="nav"><li> <a href="index.html">Cloud Manager 3.7ドキュメント</a> </li><!-- Check Container --><li class="subfolders"> <a href="#">リリースノート</a> <ul><!-- Check Container --><li class="subfolders"> <a href="#">クラウドマネージャー</a> <ul><li> <a href="reference_new_occm.html">新着情報</a> </li><li> <a href="reference_issues.html">既知の問題点</a> </li><li> <a href="reference_limitations.html">既知の制限</a> </li></ul></li><li> <a href="https://docs.netapp.com/us-en/cloud-volumes-ontap/" target="_blank">Cloud Volumes ONTAP</a> </li></ul></li><!-- Check Container --><li class="subfolders"> <a href="#">コンセプト</a> <ul><li> <a href="concept_overview.html">製品の概要</a> </li><li> <a href="concept_cloud_central.html">NetApp Cloud Central</a> </li><li> <a href="concept_cloud_central_accounts.html">Cloud Centralアカウント</a> </li><li> <a href="concept_accounts_and_permissions.html">クラウドプロバイダーアカウント</a> </li><!-- Check Container --><li class="subfolders"> <a href="#">ストレージ</a> <ul><li> <a href="concept_storage.html">ディスクとアグリゲート</a> </li><li> <a href="concept_data_tiering.html">データ階層化</a> </li><li> <a href="concept_storage_management.html">ストレージ管理</a> </li><li> <a href="concept_worm.html">WORMストレージ</a> </li></ul></li><!-- Check Container --><li class="subfolders"> <a href="#">高可用性ペア</a> <ul><li> <a href="concept_ha.html">AWSのHAペア</a> </li><li> <a href="concept_ha_azure.html">AzureのHAペア</a> </li></ul></li><li> <a href="concept_evaluating.html">評価する</a> </li><li> <a href="concept_licensing.html">免許</a> </li><li> <a href="concept_security.html">セキュリティ</a> </li><li> <a href="concept_performance.html">性能</a> </li></ul></li><!-- Check Container --><li class="subfolders"> <a href="#">入門</a> <ul><li> <a href="reference_deployment_overview.html">展開の概要</a> </li><li> <a href="task_getting_started_aws.html">AWSの開始方法</a> </li><li> <a href="task_getting_started_azure.html">Azureの開始方法</a> </li><li> <a href="task_getting_started_gcp.html">GCPを始めよう</a> </li><!-- Check Container --><li class="subfolders"> <a href="#">Cloud Managerのセットアップ</a> <ul><li> <a href="task_setting_up_cloud_central_accounts.html">Cloud Centralアカウントのセットアップ</a> </li><li> <a href="task_adding_cloud_accounts.html">クラウドプロバイダーアカウントの追加</a> </li><li> <a href="task_adding_nss_accounts.html">ネットアップサポートサイトアカウントの追加</a> </li><li> <a href="task_installing_https_cert.html">HTTPS証明書のインストール</a> </li><li> <a href="task_setting_up_kms.html">AWS KMSのセットアップ</a> </li></ul></li><!-- Check Container --><li class="subfolders"> <a href="#">ネットワーク要件</a> <ul><li> <a href="reference_networking_cloud_manager.html">クラウドマネージャー</a> </li><li> <a href="reference_networking_aws.html">Cloud Volumes ONTAP for AWS</a> </li><li> <a href="task_setting_up_transit_gateway.html">AWSトランジットゲートウェイのセットアップ</a> </li><li> <a href="reference_networking_azure.html">Cloud Volumes ONTAP for Azure</a> </li></ul></li><!-- Check Container --><li class="subfolders"> <a href="#">追加の展開オプション</a> <ul><li> <a href="reference_cloud_mgr_reqs.html">Cloud Managerのホスト要件</a> </li><li> <a href="task_installing_linux.html">LinuxホストへのCloud Managerのインストール</a> </li><li> <a href="task_launching_aws_mktp.html">AWS MarketplaceからCloud Managerをデプロイする</a> </li><li> <a href="task_launching_azure_mktp.html">Azure MarketplaceからCloud Managerをデプロイする</a> </li><li> <a href="task_installing_azure_gov.html">Azure GovリージョンにCloud Managerをデプロイする</a> </li><li> <a href="task_installing_azure_germany.html">AzureドイツリージョンにCloud Managerをデプロイする</a> </li><li> <a href="https://docs.netapp.com/us-en/occm/media/c2s.pdf" target="_blank">AWS C2S環境の開始方法</a> </li></ul></li></ul></li><!-- Check Container --><li class="subfolders"> <a href="#">Cloud Volumes ONTAPの展開</a> <ul><li> <a href="reference_before.html">あなたが始める前に</a> </li><li> <a href="task_logging_in.html">Cloud Managerへのログイン</a> </li><li> <a href="task_planning_your_config.html">構成の計画</a> </li><li> <a href="task_finding_system_id.html">システムIDを見つける</a> </li><li> <a href="task_enabling_flash_cache.html">AWSのCloud Volumes ONTAPでフラッシュキャッシュを有効にする</a> </li><li> <a href="task_deploying_otc_aws.html">AWSでCloud Volumes ONTAPを起動する</a> </li><li> <a href="task_deploying_otc_azure.html">AzureでCloud Volumes ONTAPを起動する</a> </li><li> <a href="task_registering.html">従量課金制システムの登録</a> </li><li> <a href="task_setting_up_ontap_cloud.html">Cloud Volumes ONTAPのセットアップ</a> </li></ul></li><!-- Check Container --><li class="subfolders"> <a href="#">ストレージのプロビジョニング</a> <ul><li> <a href="task_provisioning_storage.html">ボリューム、アグリゲート、およびLUNの作成</a> </li><li> <a href="task_tiering.html">非アクティブなデータをオブジェクトストレージに階層化する</a> </li><li> <a href="task_connecting_kubernetes.html">永続ストレージとしてCloud Volumes ONTAPを使用する</a> </li><li> <a href="task_encrypting_volumes.html">NetApp Volume Encryptionを使用したボリュームの暗号化</a> </li><li> <a href="task_managing_storage.html">既存のストレージの管理</a> </li></ul></li><!-- Check Container --><li class="subfolders"> <a href="#">データの複製と保護</a> <ul><li> <a href="task_discovering_ontap.html">ONTAPクラスタの検出と管理</a> </li><li> <a href="task_replicating_data.html">クラウドとの間でデータを複製する</a> </li><li> <a href="task_syncing_s3.html">データをAWS S3に同期する</a> </li><li class="active"> <a href="task_setting_up_cbs.html">AWSのクラウドバックアップサービスを使用してデータをバックアップする</a> </li></ul></li><!-- Check Container --><li class="subfolders"> <a href="#">Cloud Volumes ONTAPの管理</a> <ul><li> <a href="task_connecting_to_otc.html">Cloud Volumes ONTAPへの接続</a> </li><li> <a href="task_updating_ontap_cloud.html">ソフトウェアの更新</a> </li><li> <a href="task_modifying_ontap_cloud.html">システム構成の変更</a> </li><li> <a href="task_managing_state.html">システムの停止と起動</a> </li><li> <a href="task_monitoring_costs.html">AWSコストの監視</a> </li><li> <a href="task_protecting_ransomware.html">ランサムウェア保護の改善</a> </li><li> <a href="task_adding_ontap_cloud.html">既存のシステムを追加する</a> </li><li> <a href="task_deleting_working_env.html">システムの削除</a> </li></ul></li><!-- Check Container --><li class="subfolders"> <a href="#">Cloud Managerの管理</a> <ul><li> <a href="task_updating_cloud_manager.html">Cloud Managerの更新</a> </li><li> <a href="task_managing_cloud_central_accounts.html">Cloud Centralアカウントの管理</a> </li><li> <a href="task_removing.html">作業環境の削除</a> </li><li> <a href="task_configuring_proxy.html">プロキシ設定の構成</a> </li><li> <a href="task_renewing_cert.html">HTTPS証明書の更新</a> </li><li> <a href="task_restoring.html">Cloud Managerの復元</a> </li><li> <a href="task_uninstalling.html">Cloud Managerのアンインストール</a> </li></ul></li><!-- Check Container --><li class="subfolders"> <a href="#">APIと自動化</a> <ul><li> <a href="https://docs.netapp.com/us-en/occm/api.html" target="_blank">API開発者ガイド</a> </li><li> <a href="reference_infrastructure_as_code.html">自動化サンプル</a> </li></ul></li><!-- Check Container --><li class="subfolders"> <a href="#">参照</a> <ul><li> <a href="reference_integration_faq.html">Cloud Central統合に関するFAQ</a> </li><li> <a href="https://docs.netapp.com/us-en/cloud-volumes-ontap/index.html" target="_blank">Cloud Volumes ONTAPでサポートされている構成</a> </li><li> <a href="https://cloud.netapp.com/cloud-volumes-global-regions" target="_blank">サポートされている地域</a> </li><li> <a href="reference_security_groups.html">AWSのセキュリティグループルール</a> </li><li> <a href="reference_security_groups_azure.html">Azureのセキュリティグループルール</a> </li><li> <a href="reference_permissions.html">許可</a> </li><li> <a href="reference_default_configs.html">デフォルト設定</a> </li><li> <a href="reference_user_roles.html">ユーザー役割</a> </li><li> <a href="reference_additional_info.html">関連リンク</a> </li></ul></li><li> <a href="reference_earlier_versions.html">以前のバージョン</a> </li><li> <a href="reference_legal_notices.html">法的通知</a> </li></ul><!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you"re viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.--><script>$("li.active").parents("li").toggleClass("active");</script></div><div class="n-doc__component-detail-content n-doc__component-detail-content--show-code"><!-- Begin of page container --><article class="page-content"><div class="n-doc__component-detail-heading-wrap"><h1 class="n-doc__component-detail-heading"> AWSのNetApp Cloud Backup Serviceを使用してデータをバックアップおよび復元する<span><a target="_blank" href="https://github.com/NetAppDocs/occm/blob/master/task_setting_up_cbs.adoc" class="btn btn-default githubEditButton" role="button"><i class="fa fa-github fa-lg"></i> GitHubで編集</a> <a target="_blank" href="https://github.com/NetAppDocs/occm/issues/new?body=Page%3A%20[Backing up and restoring data using the NetApp Cloud Backup Service in AWS](https://docs.netapp.com/ja-jp/occm/task_setting_up_cbs.html)" class="btn btn-default githubEditButton" role="button"><i class="fa fa-github fa-lg"></i>ドキュメントの変更をリクエストする</a></span> </h1></div><p class="page-details"><time datetime="2019-06-11 12:40:01 +0000"> 06/11/2019 </time> <span>寄稿者<a target="_blank" href="https://github.com/netapp-bcammett"><img  class="avatar avatar-small"
          alt="netapp-bcammett"
          width="20" height="20"
          src="https://avatars3.githubusercontent.com/u/18287750?v=4"
          style="border-radius: 50%;"/></a></span> </p><div id="preamble"><div class="sectionbody"><div class="paragraph lead"><p> NetApp Cloud Backup Service for Cloud Volumes ONTAPは、クラウドデータの保護と長期アーカイブのための完全に管理されたバックアップおよび復元機能を提供します。 Cloud Backup ServiceをCloud Volumes ONTAP for AWSと統合できます。サービスによって作成されたバックアップは、AWS S3オブジェクトストレージに保存されます。 </p></div><div class="paragraph"><p> <a href="https://cloud.netapp.com/cloud-backup-service" target="_blank" rel="noopener">Cloud Backup Serviceの詳細をご覧ください</a> 。 </p></div><div class="paragraph"><p> Cloud Backup Serviceは、Cloud Volumes ONTAP 9.4以降でサポートされています。 </p></div><div class="paragraph"><p>開始するには、バックアップエージェントをインストールして構成し、コマンドを実行してバックアップおよび復元操作を開始します。ヘルプが必要な場合は、Cloud Managerのチャットアイコンを使用してお問い合わせください。 </p></div></div></div><div class="sect1"><h2 id="contacting-netapp-to-use-the-cloud-backup-service"> NetAppに連絡してクラウドバックアップサービスを使用する</h2><div class="sectionbody"><div class="paragraph"><p>始める前に、AWSアカウントIDを送信して、アカウントでCloud Backup Serviceを使用できるようにします。 </p></div><div class="olist arabic"><div class="title">ステップ</div><ol class="arabic"><li><p> AWSアカウントIDを<a href="mailto:ng-cloud-volume-ontap-preview@netapp.com">記載</a>したメールを<a href="mailto:ng-cloud-volume-ontap-preview@netapp.com">ng-cloud-volume-ontap-preview@netapp.comに</a>送信します。 </p></li></ol></div></div></div><div class="sect1"><h2 id="verifying-your-aws-permissions"> AWSアクセス許可を確認する</h2><div class="sectionbody"><div class="paragraph"><p>このページの手順を完了するには、AWSアカウントに次のアクセス許可が必要です。 </p></div><div class="paragraph"><p> ec2：DescribeVpcEndpoints <br> ec2：CreateVpcEndpoint <br> ec2：ModifyVpcEndpoint </p></div></div></div><div class="sect1"><h2 id="installing-and-configuring-the-cloud-backup-service-agent"> Cloud Backup Serviceエージェントのインストールと構成</h2><div class="sectionbody"><div class="paragraph"><p> Cloud Managerインスタンスにバックアップエージェントをインストールすることをお勧めします。エージェントパッケージをダウンロードするにはインターネット接続が必要であり、バックアップおよび復元操作にはCloud Volumes ONTAPシステムへの接続が必要です。 Cloud Managerインスタンスは、これらの要件の両方を満たす必要があります。 </p></div><div class="sect2"><h3 id="downloading-the-agent-package">エージェントパッケージのダウンロード</h3><div class="paragraph"><p> S3バケットからエージェントパッケージをダウンロードし、ファイルをインスタンス上のディレクトリに解凍します。 </p></div><div class="olist arabic"><div class="title">手順</div><ol class="arabic"><li><p> Cloud Manager EC2インスタンスへのSSH。 </p></li><li><p> Cloud Backup Serviceのエージェントをダウンロードします。 </p><div class="paragraph"><p> <code>wget <a href="https://s3.us-east-2.amazonaws.com/cbs-package-bucket/packages/cvo-cbs-agent-0.7.tar.gz" class="bare">https://s3.us-east-2.amazonaws.com/cbs-package-bucket/packages/cvo-cbs-agent-0.7.tar.gz</a></code> </p> </div></li><li><p>圧縮ファイルを別の既存のディレクトリに解凍します。 </p><div class="paragraph"><p> <code>tar -xvf folder.tar -C /target/directory</code> </p> </div></li></ol></div></div><div class="sect2"><h3 id="creating-vpc-interface-endpoints-to-the-cloud-backup-service"> Cloud Backup ServiceへのVPCインターフェイスエンドポイントの作成</h3><div class="paragraph"><p> Cloud Backup Serviceと通信するには、2つのVPCインターフェイスエンドポイントが必要です。 </p></div><div class="olist arabic"><div class="title">手順</div><ol class="arabic"><li><p> AWS CLIで、 <code>aws configure</code>を実行し、シークレットキーとアクセスキーを提供します。 </p></li><li><p>次のコマンドを実行して、バックアップサービスへのVPCインターフェイスエンドポイントを作成します。 </p><div class="paragraph"><p> <code>aws --region &lt;region&gt; cloudformation create-stack --stack-name &lt;stack-name&gt; --template-body file://vpc_endpoint.json --parameters ParameterKey=VPCId,ParameterValue=&lt;vpc-id&gt; ParameterKey=ServiceCbs,ParameterValue=&lt;service-endpoint&gt;</code> </p> </div><div class="ulist"><ul><li><p> <em>リージョン</em>と<em>VPC ID</em>は、Cloud Volumes ONTAPシステムが展開されているネットワークの場所に対応している必要があります。 </p></li><li><p> <em>スタック名に</em>は、CFTの目的を識別する任意の文字列を使用できます。 </p></li><li><p> <em>テンプレート本体</em>は、ダウンロードしてディレクトリに解凍したエージェントパッケージに含まれていたクラウド形成テンプレートの場所を指定します。 </p></li><li><p> <em>サービスエンドポイントは、EU-</em>西-1領域または弊社-東-1地域におけるバックアップサービスのエンドポイントを指している必要があります。 </p><div class="ulist"><ul><li><p> eu-west-1：com.amazonaws.vpce.eu-west-1.vpce-svc-0cd9f6bf5706d5ec9 </p></li><li><p> us-east-1：com.amazonaws.vpce.us-east-1.vpce-svc-046e3104ac8604f7e </p></li></ul></div></li></ul></div></li><li><p>次のコマンドを実行して、復元サービスへのVPCインターフェイスエンドポイントを作成します。 </p><div class="paragraph"><p> <code>aws --region &lt;region&gt; cloudformation create-stack --stack-name &lt;stack-name&gt; --template-body file://vpc_endpoint.json --parameters ParameterKey=VPCId,ParameterValue=&lt;vpc-id&gt; ParameterKey=ServiceCbs,ParameterValue=&lt;service-endpoint&gt;</code> </p> </div><div class="paragraph"><p>このコマンドと前のコマンドの唯一の違いは、 <em>サービスエンドポイントの</em>値です。 <em>サービスエンドポイントは、EU-</em>西-1領域または弊社-東-1地域の復元サービスエンドポイントを指している必要があります。 </p></div><div class="ulist"><ul><li><p> eu-west-1：com.amazonaws.vpce.eu-west-1.vpce-svc-04dd86976846bc84b </p></li><li><p> us-east-1：com.amazonaws.vpce.us-east-1.vpce-svc-0343dd25489869199 </p></li></ul></div></li></ol></div></div><div class="sect2"><h3 id="configuring-the-subnets-for-the-vpc-interface-endpoints"> VPCインターフェイスエンドポイントのサブネットの構成</h3><div class="paragraph"><p>作成したVPCインターフェイスエンドポイントは、Cloud Volumes ONTAPシステムが存在するサブネットに追加する必要があります。 </p></div><div class="olist arabic"><div class="title">手順</div><ol class="arabic"><li><p> AWSコンソールに移動し、VPCサービスを選択して、[ <strong>エンドポイント</strong> ]をクリックします。 </p></li><li><p>バックアップサービスのVPCインターフェイスエンドポイントを選択します。 </p></li><li><p> [ <strong>サブネット</strong> ]タブをクリックし、 <strong>[サブネットの管理</strong> ]をクリックします。 </p><div class="paragraph"><p> <span class="image"><img src="./media/screenshot_aws_endpoint_ip_manage.gif" alt="エンドポイントを選択した後、[サブネット]タブに[サブネットの管理]ボタンを表示するAWS VPCコンソールのスクリーンショット。"></span> </p></div></li><li><p> Cloud Volumes ONTAPシステムが存在するサブネットを選択し、 <strong>[サブネットの変更</strong> ]をクリックします。 </p></li><li><p> [サブネット]タブから、Cloud Volumes ONTAPシステムが存在するサブネットのプライベートIPアドレスをコピーします。 </p><div class="paragraph"><p>このIPアドレスは、 <em>config.json</em>ファイルを変更してCloud Backup Serviceエージェントを構成するときに必要になります。 </p></div></li><li><p>復元サービスエンドポイントに対してこれらの手順を繰り返します。 </p></li></ol></div></div><div class="sect2"><h3 id="generating-a-user-token-for-authentication">認証用のユーザートークンの生成</h3><div class="paragraph"><p>各バックアップおよび復元操作には、認証用のユーザートークンが必要です。 </p></div><div class="olist arabic"><div class="title">手順</div><ol class="arabic"><li><p> <a href="https://services.cloud.netapp.com/developer-hub" target="_blank" rel="noopener">NetApp Cloud CentralのAPIドキュメントにアクセスします</a> 。 </p></li><li><p> [ <strong>認証方法を学ぶ]を</strong>クリックします。 </p></li><li><p>手順に従って、通常のアクセスまたはフェデレーションアクセスを使用してアクセストークンを生成し、クラウドバックアップサービスで機能するように本文にいくつかの変更を加えます。 </p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>定期的にアクセスするには、次のオーディエンスとclient_idを使用します。 </p><div class="listingblock"><div class="content"><pre class="highlight"> <code class="language-json" data-lang="json">&quot;audience&quot;: &quot;https://cloudmanager.cloud.netapp.com&quot;, &quot;client_id&quot;: &quot;_CloudManagerClientID_&quot;</code> </pre> </div></div><div class="paragraph"><p>次のAPIを使用して、Cloud ManagerのクライアントIDを取得します。 </p></div><div class="listingblock"><div class="content"><pre> GET / occm / system / support-services </pre></div></div></li><li><p>フェデレーションアクセスの場合、次の対象ユーザーを使用します。 </p><div class="listingblock"><div class="content"><pre class="highlight"> <code class="language-json" data-lang="json">&quot;audience&quot;: &quot;https://cloudmanager.cloud.netapp.com&quot;,</code> </pre> </div></div><div class="paragraph"><p> <a href="https://youtu.be/qXz4TSOAibo" target="_blank" rel="noopener">YouTubeビデオ：Cloud ManagerでフェデレーションアクセスでRest APIを使用する</a> </p></div></li></ol></div></li><li><p>トークンを受け取ったら、既存の値を上書きして値を<em>user_token.json</em>ファイルにコピーします。 </p><div class="paragraph"><p>このファイルは、エージェントパッケージを圧縮解除したディレクトリと同じディレクトリにあります。 </p></div><div class="paragraph"><p> NetApp Cloud Centralはトークンを使用して、Cloud Volumes ONTAPとCloud Backup Service間のすべてのAPIコールに対してユーザーを認証します。トークンが無効または期限切れの場合、API呼び出しは失敗し、バックアップおよび復元操作は開始されません。 </p></div></li></ol></div></div><div class="sect2"><h3 id="configuring-the-cloud-backup-service-agent"> Cloud Backup Serviceエージェントの構成</h3><div class="paragraph"><p> VPCエンドポイントのネットワークインターフェイスのIPアドレスを指定して、エージェントの構成ファイルを変更します。これにより、エージェントはクラウドバックアップサービスに接続できます。 </p></div><div class="paragraph"><div class="title">このタスクについて</div><p>エージェントの起動後にこの構成ファイルを更新する場合、サービスを強制終了してから再起動する必要があります。 <a href="#updating-the-config-json-file">config.jsonファイルの更新を</a>参照してください。 </p></div><div class="olist arabic"><div class="title">手順</div><ol class="arabic"><li><p>エージェントパッケージを圧縮解除したディレクトリに移動します。 </p></li><li><p> IPアドレスを指定して<em>config.json</em>ファイルを編集します。 </p><div class="listingblock"><div class="content"><pre class="highlight"> <code class="language-json" data-lang="json">{ &quot;LRSE_BACKUP_IP&quot;: &quot;&lt;ENI private IP for backup&gt;&quot;, &quot;LRSE_RESTORE_IP&quot;: &quot;&lt;ENI private IP for restore&gt;&quot;, &quot;CBS_ENDPOINT_IP&quot; : &quot;&lt;ENI private IP for backup&gt;&quot;, &quot;CBS_ENDPOINT_PORT&quot; : &quot;8088&quot;, &quot;SNAPMIRROR_POLICY_TRIES&quot;: 8, &quot;SNAPMIRROR_RETRY_COUNT&quot;: 10, &quot;SNAPMIRROR_POLL_INTERVAL&quot;:30 }</code> </pre> </div></div><div class="ulist"><ul><li><p> LRSE_BACKUP_IPは、バックアップサービスに接続されているVPCインターフェイスエンドポイントのプライベートIPアドレスです。 AWSコンソールでIPアドレスを見つけることができます。 VPCサービスに移動し、VPCエンドポイントを選択します。 [サブネット]をクリックして、Cloud Volumes ONTAPシステムが存在するサブネットのIPアドレスを見つけます。 </p><div class="paragraph"><p> <span class="image"><img src="./media/screenshot_aws_endpoint_ip.gif" alt="VPCエンドポイントのネットワークインターフェイスを示すAWS VPCコンソールのスクリーンショット。"></span> </p></div></li><li><p> LRSE_RESTORE_IPは、復元サービスに接続されているVPCインターフェイスエンドポイントのプライベートIPアドレスです。 LRSE_BACKUP_IPに提供されたのと同じ指示に従ってください。 </p></li><li><p> API呼び出しを行うために同じVPCインターフェイスエンドポイントを使用するため、CBS_ENDPOINT_IPはLRSE_BACKUP_IPと同じである必要があります。 </p></li></ul></div></li></ol></div><div class="sidebarblock"><div class="content"><div class="title">複数のCloud Volumes ONTAPシステムをバックアップしている場合はどうなりますか？ </div><div class="paragraph"><p>サブネットが同じアベイラビリティーゾーンにある限り、複数のCloud Volumes ONTAPシステムに同じIPアドレスを使用してもかまいません。アベイラビリティーゾーンに分散している複数のシステムをバックアップする必要がある場合は、製品内チャットを使用してお問い合わせください。セットアップのお手伝いをいたします。 </p></div></div></div></div><div class="sect2"><h3 id="starting-the-cloud-backup-service-agent"> Cloud Backup Serviceエージェントの開始</h3><div class="paragraph"><p>エージェントをインストールして構成したので、エージェントを開始する必要があります。 </p></div><div class="olist arabic"><div class="title">手順</div><ol class="arabic"><li><p>次のコマンドを実行します。 </p><div class="paragraph"><p> <code>chmod +x cvo-cbs-service</code> <br> <code>chmod +x cvo-cbs-client</code> <br> <code>./cvo-cbs-service &amp;</code> </p> </div></li></ol></div></div></div></div><div class="sect1"><h2 id="preparing-to-back-up-volumes">ボリュームのバックアップの準備</h2><div class="sectionbody"><div class="paragraph"><p>バックアップ操作を実行するときは、ボリュームに関する情報を含むJSONファイルを指定する必要があります。 JSONテンプレートを使用して、ボリュームごとにJSONファイルを準備できます。 </p></div><div class="sect2"><h3 id="preparing-ad-hoc-backups">アドホックバックアップの準備</h3><div class="paragraph"><p>アドホックバックアップは、即時の1回限りのバックアップです。バックアップするボリュームごとに個別のJSONファイルを準備します。 </p></div><div class="olist arabic"><div class="title">手順</div><ol class="arabic"><li><p> <em>adhoc_backup.jsonの</em>コピーを作成し、ボリュームに関する詳細を<em>指定</em>して編集します。 </p><div class="listingblock"><div class="content"><pre class="highlight"> <code class="language-json" data-lang="json">{ &quot;ownerId&quot;: &quot;e7855e3e-006d-49f0-bd1e-2c0df8fec505&quot;, &quot;ontapIP&quot;: &quot;10.193.78.9&quot;, &quot;username&quot;: &quot;admin&quot;, &quot;password&quot;: &quot;netapp1!&quot;, &quot;vserverName&quot;: &quot;vs_seeni&quot;, &quot;volumeName&quot;: &quot;backup&quot;, &quot;fileSystemId&quot;: &quot;cf765c5f-84e6-4080-84a7-599ab8a31968&quot;, &quot;sourceSnapshot&quot;: &quot;snap10&quot;, &quot;tag&quot;: &quot;&quot; }</code> </pre> </div></div><div class="ulist"><ul><li><p> ownerId：このCloud Managerシステムに関連付けられているすべてのバックアップおよび復元操作の一意の識別子。 「uuidgen」UNIXユーティリティを実行してIDを生成し、バックアップおよび復元操作のためにすべてのJSONファイルで使用します。 </p></li><li><p> ontapIP：ボリュームが配置されているCloud Volumes ONTAPシステムのクラスター管理IP。 [Working Environments]ページからシステムを選択して、Cloud Managerからこの値を取得します。 </p></li><li><p>ユーザー名とパスワード：Cloud Volumes ONTAPシステムの資格情報。 </p></li><li><p> vserverName：データボリュームを含むストレージ仮想マシン（SVM）の名前。作業環境を開き、[ <strong>情報]</strong>を選択して、Cloud Managerからこの値を取得します。 </p></li><li><p> volumeName：バックアップするボリューム名の名前。 </p></li><li><p> fileSystemId：ボリュームのバックアップコピーのファイルシステムUUID。この値は、ボリュームを識別するためにクラウドバックアップサービスによって使用されるため、すべてのボリュームに対して一意である必要があります。 「uuidgen」UNIXユーティリティを実行してIDを生成します。 </p></li><li><p> sourceSnapshot（オプション）：バックアップするSnapshotコピーの名前を指定します。このパラメーターを省略すると、Cloud Backup Serviceは既存の状態に基づいてボリュームをバックアップします。 </p></li><li><p>タグ（オプション）：バックアップのタグを指定して、より簡単に検索できるようにします。 </p></li></ul></div></li></ol></div></div><div class="sect2"><h3 id="preparing-scheduled-backups">スケジュールされたバックアップの準備</h3><div class="paragraph"><p>スケジュールされたバックアップは、定義された間隔で増分バックアップをトリガーします。バックアップするボリュームごとに個別のJSONファイルを準備します。 </p></div><div class="olist arabic"><div class="title">手順</div><ol class="arabic"><li><p> <em>schedule_backup.jsonの</em>コピーを作成し、ボリュームに関する詳細を指定して編集します。 </p><div class="listingblock"><div class="content"><pre class="highlight"> <code class="language-json" data-lang="json">{ &quot;ownerId&quot;: &quot;e7855e3e-006d-49f0-bd1e-2c0df8fec505&quot;, &quot;ontapIP&quot;: &quot;10.193.78.9&quot;, &quot;username&quot;: &quot;admin&quot;, &quot;password&quot;: &quot;netapp1!&quot;, &quot;vserverName&quot;: &quot;vs_seeni&quot;, &quot;volumeName&quot;: &quot;backup&quot;, &quot;fileSystemId&quot;: &quot;e2334e3e-226d-39f0-bd1e-1c0df6fec215&quot;, &quot;snapmirrorPolicy&quot;: { &quot;enabled&quot;: true, &quot;daily-schedule&quot;: { &quot;snapmirrorLabel&quot;: &quot;sm_daily&quot;, &quot;snapshotsToKeep&quot;: 24 }, &quot;weekly-schedule&quot;: { &quot;snapmirrorLabel&quot;: &quot;sm_weekly&quot;, &quot;snapshotsToKeep&quot;: 4 }, &quot;monthly-schedule&quot;: { &quot;snapmirrorLabel&quot;: &quot;sm_monthly&quot;, &quot;snapshotsToKeep&quot;: 40 } } }</code> </pre> </div></div><div class="ulist"><ul><li><p> ownerId：このCloud Managerシステムに関連付けられているすべてのバックアップおよび復元操作の一意の識別子。 「uuidgen」UNIXユーティリティを実行してIDを生成し、バックアップおよび復元操作のためにすべてのJSONファイルで使用します。 </p></li><li><p> ontapIP：ボリュームが配置されているCloud Volumes ONTAPシステムのクラスター管理IP。 [Working Environments]ページからシステムを選択して、Cloud Managerからこの値を取得します。 </p></li><li><p>ユーザー名とパスワード：Cloud Volumes ONTAPシステムの資格情報。 </p></li><li><p> vserverName：データボリュームを含むストレージ仮想マシン（SVM）の名前。作業環境を開き、[ <strong>情報]</strong>を選択して、Cloud Managerからこの値を取得します。 </p></li><li><p> volumeName：バックアップするボリューム名の名前。 </p></li><li><p> fileSystemId：ボリュームのバックアップコピーのファイルシステムUUID。この値は、ボリュームを識別するためにCloud Backup Serviceによって使用されるため、ボリュームごとに一意である必要があります。 「uuidgen」UNIXユーティリティを実行してIDを生成します。 </p></li><li><p> snapmirrorPolicy：スケジュールされたバックアップのSnapMirrorポリシーを定義します。 </p></li><li><p> enabled：ポリシーを有効にします。 </p></li><li><p> daily-schedule：ポリシーの毎日のスケジュール情報を定義します。 </p></li><li><p> weekly-schedule：ポリシーの毎週のスケジュール情報を定義します。 </p></li><li><p>毎月のスケジュール：ポリシーの毎月のスケジュール情報を定義します。 </p></li><li><p> snapmirrorLabel：ルールのSnapMirrorラベル。 </p></li><li><p> snapshotsToKeep：保持するSnapshotコピーの数。 </p></li></ul></div></li><li><p> Cloud Volumes ONTAPシステムでスナップショットポリシーを作成し、スナップショットポリシーを使用するようにボリュームを変更します。 </p><div class="admonitionblock important"><table><tr><td class="icon"><i class="fa icon-important" title="重要"></i></td><td class="content">スケジュールされたバックアップを機能させるには、対応するスナップショットポリシーをCloud Volumes ONTAPシステムで構成し、ボリュームにアタッチする必要があります。スナップショットポリシーのラベルは、JSONファイルで指定した<em>snapmirrorLabel</em>の値と一致する必要があります。 </td></tr></table></div><div class="paragraph"><p> <strong>例</strong> </p></div><div class="paragraph"><p> <code>cluster1::&gt; volume snapshot policy create -vserver vs0 -policy mysnappolicy -schedule1 hourly-count1 5 -prefix1 every_hour -snapmirror-label1 hrLabel</code> </p> </div><div class="paragraph"><p> <code>cluster1::&gt; volume modify -vserver vs0 -volume backup -snapshot-policy mysnappolicy</code> </p> </div></li></ol></div></div></div></div><div class="sect1"><h2 id="preparing-to-restore-volumes">ボリュームを復元する準備</h2><div class="sectionbody"><div class="paragraph"><p>ボリュームを復元すると、Cloud Backup Serviceはボリュームの内容を、事前に作成する必要があるデータ保護ボリュームに復元します。復元の準備をするには、新しいデータ保護ボリュームを作成し、ボリュームの復元に関する詳細を指定するJSONファイルを設定します。復元操作を実行するときにJSONファイルを指定します。 </p></div><div class="olist arabic"><div class="title">手順</div><ol class="arabic"><li><p>ボリュームの内容を復元するデータ保護ボリュームを作成します。 </p><div class="paragraph"><p> <strong>例</strong> </p></div><div class="paragraph"><p> <code>cluster1::&gt; vol create -volume restoreVol -aggregate aggr1 -size 100GB -state online -policy default -type DP</code> </p> </div></li><li><p> <em>restore.jsonの</em>コピーを作成し、ボリュームに関する詳細を提供して編集します。 </p><div class="listingblock"><div class="content"><pre class="highlight"> <code class="language-json" data-lang="json">{ &quot;ownerId&quot;: &quot;e7855e3e-006d-49f0-bd1e-2c0df8fec505&quot;, &quot;ontapIP&quot;: &quot;10.193.78.9&quot;, &quot;username&quot;: &quot;admin&quot;, &quot;password&quot;: &quot;netapp1!&quot;, &quot;vserverName&quot;: &quot;vs_seeni&quot;, &quot;fileSystemId&quot;: &quot;cf765c5f-84e6-4080-84a7-599ab8a31967&quot;, &quot;destinationVolumeName&quot;: &quot;retoreauth&quot;, &quot;restoreSnapshot&quot;: &quot;&quot; }</code> </pre> </div></div><div class="ulist"><ul><li><p> ownerId：このCloud Managerシステムに関連付けられているすべてのバックアップおよび復元操作の一意の識別子。 </p></li><li><p> ontapIP：ボリュームが配置されているCloud Volumes ONTAPシステムのクラスター管理IP。 [Working Environments]ページからシステムを選択して、Cloud Managerからこの値を取得します。 </p></li><li><p>ユーザー名/パスワード：Cloud Volumes ONTAPシステムの資格情報。 </p></li><li><p> vserverName：データボリュームを含むストレージ仮想マシン（SVM）の名前。値は、バックアップ操作のためにJSONファイルに入力したものと一致する必要があります。 </p></li><li><p> fileSystemId：ボリュームのバックアップコピーのファイルシステムUUID。値は、バックアップ操作のためにJSONファイルに入力したものと一致する必要があります。 </p></li><li><p> destinationVolumeName：手順1で作成した宛先ボリュームの名前を指定します。ボリュームはデータ保護（DP）ボリュームである必要があります。 </p></li><li><p> restoreSnapshot：復元するSnapshotコピーの名前を指定します。特定のSnapshotコピーを指定したくない場合は、上記のように空の値を入力してください。 </p></li></ul></div></li></ol></div></div></div><div class="sect1"><h2 id="backing-up-and-restoring-volumes">ボリュームのバックアップと復元</h2><div class="sectionbody"><div class="paragraph"><p>準備ができたら、ボリュームのバックアップと復元を開始します。 </p></div><div class="olist arabic"><div class="title">手順</div><ol class="arabic"><li><p> Cloud Managerインスタンスから次のコマンドを実行します。 </p><div class="paragraph"><p> <code>./cvo-cbs-client</code> </p> </div></li><li><p>プロンプトからアクションを選択します。 </p><div class="dlist"><dl><dt class="hdlist1"> 1）ボリュームのバックアップ</dt><dd><p>ワンタイムバックアップを実行します。プロンプトが表示されたら、バックアップするボリュームに対応するJSONファイルの絶対パスを指定します。 </p></dd><dt class="hdlist1"> 2）スケジュールされたバックアップ</dt><dd><p>スケジュールされたバックアップを使用して、増分バックアップを定期的にトリガーします。プロンプトが表示されたら、バックアップするボリュームに対応するJSONファイルの絶対パスを指定します。 </p></dd><dt class="hdlist1"> 3）DPボリュームへの復元</dt><dd><p>以前にバックアップしたボリュームを復元します。プロンプトが表示されたら、復元するボリュームに対応するJSONファイルの絶対パスを指定します。 </p></dd><dt class="hdlist1"> 4）ジョブステータス</dt><dd><p>バックアップおよび復元操作のジョブステータスを表示します。バックアップおよび復元操作は非同期操作であるため、操作を実行するとジョブIDが取得されます。このオプションがjobIdの入力を求める場合、そのIDを入力として使用します。 </p></dd><dt class="hdlist1"> 5）ボリュームバックアップのリスト</dt><dd><p>ボリュームに対応するすべてのバックアップをリストします。バックアップJSONテンプレートで指定したfileSystemIdは、このオプションへの入力として提供する必要があります。 </p></dd><dt class="hdlist1"> 6）終了</dt><dd><p>プロンプトを終了します。 </p></dd></dl></div></li></ol></div><div class="paragraph"><p> <strong>例1</strong> </p></div><div class="literalblock"><div class="content"><pre>実行する操作を選択します：1
バックアップボリュームの詳細を入力しますjsonファイルパス：/home/ubuntu/cvo-cbs-agent/adhoc_backup.json
バックアップ要求を処理しています...
アドホックバックアップが正常に開始されました。
JobID 45を使用してバックアップステータスを取得する</pre></div></div><div class="paragraph"><p> <strong>例2</strong> </p></div><div class="literalblock"><div class="content"><pre>実行する操作を選択します。5
ファイルシステムIDを入力して、バックアップを一覧表示します：cf761c4f-84e6-4080-84a7-599ab8b31965
処理リストのバックアップ：cf761c4f-84e6-4080-84a7-599ab8b31965
合計バックアップ：1
--------------------バックアップ0の詳細--------------------
バックアップID = db682289-b896-d248-ac29-a13e4e8e1bbb
バックアップ名= adhoc_2019-04-06_150037
バックアップタイプ=アドホック
完了時間= 2019-04-06T15：02：23.000Z
作成時間= 2019-04-06T15：00：51.000Z
サイズ= 1.2582912e + 09
ステータス=バックアップ完了</pre></div></div><div class="paragraph"><p> <strong>例3</strong> </p></div><div class="literalblock"><div class="content"><pre>実行する操作を選択します：3
復元ボリュームの詳細を入力しますjsonファイルパス：/home/ubuntu/cvo-cbs-agent/restore.json
ボリュームの復元要求を処理しています...
復元が正常に開始されました。
JobID 47を使用したバックアップステータスの追跡</pre></div></div><div class="sect2"><h3 id="mounting-a-restored-volume">復元されたボリュームのマウント</h3><div class="paragraph"><p>ボリュームを復元したら、ボリュームをマウントして、含まれているファイルを表示する必要があります。 </p></div><div class="olist arabic"><div class="title">手順</div><ol class="arabic"><li><p> <a href="task_connecting_to_otc.html#connecting-to-the-cloud-volumes-ontap-cli">Cloud Volumes ONTAP CLIに接続します</a> 。 </p></li><li><p>ジャンクションパスを追加します。 </p><div class="paragraph"><p> <code>volume mount -vserver &lt;vserver_name&gt; -volume &lt;volume_name&gt; -junction-path /&lt;junction-path-name&gt;</code> </p> </div></li><li><p>ボリュームが目的のマウント状態にあることを確認します。 </p><div class="paragraph"><p> <code>volume show -vserver &lt;vserver_name&gt; -volume &lt;volume_name&gt; -junction</code> </p> </div></li><li><p>ボリュームをクライアントにマウントします。 </p></li></ol></div></div></div></div><div class="sect1"><h2 id="administering">管理する</h2><div class="sectionbody"><div class="ulist"><ul><li><p> <a href="#updating-the-config-json-file">config.jsonファイルの更新</a> </p></li><li><p> <a href="#troubleshooting-unauthorized-access">不正アクセスのトラブルシューティング</a> </p></li><li><p> <a href="#troubleshooting-the-fail-to-open-database-error">データベースを開くことができないというエラーのトラブルシューティング</a> </p></li></ul></div><div class="sect2"><h3 id="updating-the-config-json-file"> config.jsonファイルの更新</h3><div class="paragraph"><p>エージェントの起動後に<em>config.json</em>ファイルを更新する必要がある場合は、サービスを<em>強制</em>終了してから再起動する必要があります。 </p></div><div class="olist arabic"><div class="title">手順</div><ol class="arabic"><li><p> Cloud Backup Serviceエージェントを停止します。 </p><div class="paragraph"><p> <code>ps -ef | grep -i cvo-cbs-service</code> <br> <code>kill -9 &lt;service PID&gt;</code> </p> </div></li><li><p> <a href="#configuring-the-cloud-backup-service-agent">構成ファイルを更新します</a> 。 </p></li><li><p> <a href="#starting-the-cloud-backup-service-agent">エージェントを起動し</a>ます。 </p></li></ol></div></div><div class="sect2"><h3 id="troubleshooting-unauthorized-access">不正アクセスのトラブルシューティング</h3><div class="paragraph"><p>アクセストークンに問題がある場合、次のエラーメッセージが表示される場合があります。 </p></div><div class="literalblock"><div class="content"><pre> CVO APIサーバーへの投稿でステータスコード= 401とエラーUnauthorizedが返されました</pre></div></div><div class="paragraph"><p>これが発生した場合、新しいトークンを生成し、 <em>user_token.json</em>ファイルを更新します。詳細については、 <a href="#generating-a-user-token-for-authentication">認証用のユーザートークンの生成を</a>参照してください。 </p></div></div><div class="sect2"><h3 id="troubleshooting-the-fail-to-open-database-error">データベースを開くことができないというエラーのトラブルシューティング</h3><div class="paragraph"><p>次のデータベースエラーを受け取った場合は、以前に実行していたcvo-cbs-serviceを強制終了します。 </p></div><div class="literalblock"><div class="content"><pre>保留中のジョブデータベースのセットアップエラー：タイムアウト</pre></div></div><div class="olist arabic"><ol class="arabic"><li><p> Cloud Backup Serviceエージェントを停止します。 </p><div class="paragraph"><p> <code>ps -ef | grep -i cvo-cbs-service</code> <br> <code>kill -9 &lt;service PID&gt;</code> </p> </div></li><li><p> <a href="#starting-the-cloud-backup-service-agent">エージェントを起動し</a>ます。 </p></li></ol></div></div></div></div></article><!-- Page Container --></div><div class="page-nav-container"><nav class="page-nav-fixed"><div class="page-nav-title">このページ： </div><ul class="page-nav-inner" id="page-menu"></ul></nav></div></div></div></div></main><!-- Footer --><footer class="n-footer n-footer--v1" style="border-top: solid 10px #DFDFDF;"><div class="n-footer__bottom"><div class="n-container"><div class="n-footer__bottom-left"><div class="n-footer__copyright"> <a href="//www.netapp.com/us/legal/copyright.aspx" class="n-footer__copyright-link">©2019 NetApp、Inc.</a> </div><div class="n-footer__copyright"> <a href="//www.netapp.com/us/legal/index.aspx" class="n-footer__copyright-link">法的</a> </div><div class="n-footer__social-links n-footer__copyright"><ul class="n-footer__social-link-list"><li class="n-footer__social-link-list-item"> <a class="n-footer__social-link" data-ntap-social="follow-blog" href="http://blog.netapp.com" target="_blank" title="ブログ" alt="blog"><span class="n-footer__social-link-text">ブログ</span></a> <svg class="n-icon-blog n-footer__social-link-icon" aria-labelledby="title"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/occm/ja-jp/common/svg/sprite.svg#blog"></use></svg></li><li class="n-footer__social-link-list-item"> <a class="n-footer__social-link" data-ntap-social="follow-community" href="http://community.netapp.com/" target="_blank" title="コミュニティ" alt="community"><span class="n-footer__social-link-text">コミュニティ</span></a> <svg class="n-icon-twitter n-footer__social-link-icon" aria-labelledby="title"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/occm/ja-jp/common/svg/sprite.svg#comments"></use></svg></li><li class="n-footer__social-link-list-item"> <a class="n-footer__social-link" data-ntap-social="follow-twitter" href="https://twitter.com/netappdoc" target="_blank" title="twitter" alt="twitter"><span class="n-footer__social-link-text">twitter</span></a> <svg class="n-icon-twitter n-footer__social-link-icon" aria-labelledby="title"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/occm/ja-jp/common/svg/sprite.svg#twitter"></use></svg></li><li class="n-footer__social-link-list-item"> <a class="n-footer__social-link" data-ntap-social="follow-youtube" href="https://www.youtube.com/user/NetAppTechCommTV/" target="_blank" title="youtube" alt="youtube"><span class="n-footer__social-link-text">youtube</span></a> <svg class="n-icon-youtube n-footer__social-link-icon" aria-labelledby="title"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/occm/ja-jp/common/svg/sprite.svg#youtube"></use></svg></li></ul></div></div><div class="n-footer__bottom-right"><div class="n-footer__copyright"> <a href="https://docs.netapp.com/ja-jp/contribute/" class="n-footer__copyright-link">貢献する</a> </div><div class="n-footer__copyright"> <a target="_self" class="n-footer__copyright-link" href="javascript:netapp_mailto()">フィードバックをメールで送信</a> </div></div></div></div></footer></div><script src="/occm/ja-jp/common/js/components.js"></script><script src="/occm/ja-jp/common/js/doc-components.js"></script><!-- Elasticsearch JS --><script type="text/javascript" src="/occm/ja-jp/js/bundle.js"></script><!-- Syntax Highlighting --><script type="text/javascript" src="/occm/ja-jp/js/prism.js"></script><script type="text/javascript" src="/occm/ja-jp/js/prism-curl.js"></script></body></html>